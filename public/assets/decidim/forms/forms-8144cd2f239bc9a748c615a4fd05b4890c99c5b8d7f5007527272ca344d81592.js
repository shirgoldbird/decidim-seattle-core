"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e){var t=function(){function e(){var t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,e),this.wrapperField=t.wrapperField,this.controllerFieldSelector=t.controllerFieldSelector,this.dependentInputSelector=t.dependentInputSelector,this.controllerSelector=this.wrapperField.find(this.controllerFieldSelector),this._bindEvent(),this._run()}return _createClass(e,[{key:"_run",value:function(){var e=this;this.controllerSelector.each(function(t,n){var r=$(n),i=r.is(":checked");r.parents("div.collection-input").find(e.dependentInputSelector).prop("disabled",!i)})}},{key:"_bindEvent",value:function(){var e=this;this.controllerSelector.on("change",function(){e._run()})}}]),e}();e.Decidim=e.Decidim||{},e.Decidim.createOptionAttachedInputs=function(e){return new t(e)}}(window);_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e){var t=function(){function e(){var t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,e),this.wrapperField=t.wrapperField,this._bindEvent(),this._run()}return _createClass(e,[{key:"_run",value:function(){var e=this;$(this.wrapperField).find("input[type=checkbox]").each(function(t,n){var r=$(n).parents("label");if($(n).is(":checked")){var i=e.wrapperField.find("label.sorted").last();i.length>0?(i.removeClass("last-sorted"),r.insertAfter(i)):r.insertBefore(e.wrapperField.find("label:first-child")),r.addClass("sorted"),r.addClass("last-sorted")}else{var l=e.wrapperField.find("label:not(.sorted)").last();l.length>0?r.insertBefore(l):r.insertAfter(e.wrapperField.find("label:last-child")),r.removeClass("sorted")}}),$(this.wrapperField).find("label").each(function(e,t){var n=$(t).find(".position"),r=$(t).find("input[name$=\\[position\\]]");$(t).hasClass("sorted")?(r.val(e),r.prop("disabled",!1),n.html(e+1+". ")):(r.val(""),r.prop("disabled",!0),n.html(""))})}},{key:"_bindEvent",value:function(){var e=this;$(this.wrapperField).find("input[type=checkbox]").on("change",function(){e._run()})}}]),e}();e.Decidim=e.Decidim||{},e.Decidim.createAutosortableCheckboxes=function(e){return new t(e)}}(window);_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e){var t=function(){function e(){var t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,e),this.wrapperField=t.wrapperField,this.alertElement=t.alertElement,this.controllerFieldSelector=t.controllerFieldSelector,this.controllerCollectionSelector=t.controllerCollectionSelector,this.maxChoices=t.maxChoices,this.controllerSelector=this.wrapperField.find(this.controllerFieldSelector),this._bindEvent(),this._run()}return _createClass(e,[{key:"_run",value:function(){var e=this,t=this.wrapperField.find(this.controllerCollectionSelector),n=!1;t.each(function(t,r){var i=$(r).find(e.controllerFieldSelector).filter(function(e,t){return $(t).is(":checked")});n=n||i.length>e.maxChoices}),n?this.alertElement.show():this.alertElement.hide()}},{key:"_bindEvent",value:function(){var e=this;this.controllerSelector.on("change",function(){e._run()})}}]),e}();e.Decidim=e.Decidim||{},e.Decidim.createMaxChoicesAlertComponent=function(e){return new t(e)}}(window),function(){var e=window.Decidim,t=e.createOptionAttachedInputs,n=e.createAutosortableCheckboxes,r=e.createMaxChoicesAlertComponent;$(".radio-button-collection, .check-box-collection").each(function(e,n){t({wrapperField:$(n),controllerFieldSelector:"input[type=radio], input[type=checkbox]",dependentInputSelector:"input[type=text], input[type=hidden]"})}),$.unique($(".check-box-collection").parents(".answer")).each(function(e,t){var n=$(t).data("max-choices");n&&r({wrapperField:$(t),controllerFieldSelector:"input[type=checkbox]",controllerCollectionSelector:".check-box-collection",alertElement:$(t).find(".max-choices-alert"),maxChoices:n})}),$(".sortable-check-box-collection").each(function(e,t){n({wrapperField:$(t)})});var i=$("form.answer-questionnaire");i.length>0&&function(){i.find("input, textarea, select").on("change",function(){i.data("changed",!0)});var e=i.data("safe-path").split("?")[0];$(document).on("click","a",function(e){window.exitUrl=e.currentTarget.href}),$(document).on("submit","form",function(e){window.exitUrl=e.currentTarget.action}),window.onbeforeunload=function(){var t=window.exitUrl,n=i.data("changed");return window.exitUrl=null,!n||t&&t.includes(e)?null:""}}()}();