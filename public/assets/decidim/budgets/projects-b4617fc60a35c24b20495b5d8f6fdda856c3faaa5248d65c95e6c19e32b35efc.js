"use strict";$(function(){var t=function(){var t=document.querySelector("[data-progressbox-fixed]"),e=document.querySelector("[data-progress-reference]"),r="is-progressbox-visible";e&&(e.getBoundingClientRect().bottom>0?t.classList.remove(r):t.classList.add(r))};window.addEventListener("scroll",t),window.DecidimBudgets=window.DecidimBudgets||{},window.DecidimBudgets.checkProgressPosition=t}),$(function(){var t,e=$("#projects, #project"),r=$(".budget-summary__total"),n=$("#budget-excess"),o=$(".budget-summary__progressbox"),a=parseInt(r.attr("data-total-budget"),10),d=function(t){t.stopPropagation(),t.preventDefault()};e.on("click",".budget-list__action",function(t){var e=parseInt(o.attr("data-current-budget"),10),r=$(t.currentTarget),i=parseInt(r.attr("data-budget"),10);r.attr("disabled")?d(t):"true"===r.attr("data-add")&&e+i>a&&(n.foundation("toggle"),d(t))}),$("#order-progress [data-toggle=budget-confirm]").length>0&&(t=$(".budget-summary").attr("data-safe-url").split("?")[0],$(document).on("click","a",function(t){window.exitUrl=t.currentTarget.href}),$(document).on("submit","form",function(t){window.exitUrl=t.currentTarget.action}),window.onbeforeunload=function(){var e=parseInt(o.attr("data-current-budget"),10),r=window.exitUrl;return window.exitUrl=null,0===e||r&&r.startsWith(t)?null:""})});